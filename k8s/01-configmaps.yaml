apiVersion: v1
kind: ConfigMap
metadata:
  name: business-service-config
  namespace: product-mgmt-prod
data:
  application.yml: |
    spring:
      application:
        name: business-service
      profiles:
        active: prod
      datasource:
        url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
        username: ${DB_USER}
        password: ${DB_PASSWORD}
        hikari:
          maximum-pool-size: 50
          minimum-idle: 10
          connection-timeout: 20000
          idle-timeout: 300000
          max-lifetime: 1800000
      rabbitmq:
        host: ${RABBITMQ_HOST}
        port: ${RABBITMQ_PORT}
        username: ${RABBITMQ_USER}
        password: ${RABBITMQ_PASSWORD}
      redis:
        host: ${REDIS_HOST}
        port: ${REDIS_PORT}
        password: ${REDIS_PASSWORD}
        lettuce:
          pool:
            max-active: 20
            max-idle: 10
            min-idle: 5
      cache:
        type: redis
        redis:
          time-to-live: 300000
    
    management:
      endpoints:
        web:
          exposure:
            include: health,info,prometheus,metrics
      metrics:
        export:
          prometheus:
            enabled: true
    
    logging:
      level:
        root: INFO
        com.enterprise.business: INFO
      pattern:
        console: "%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: iam-service-config
  namespace: product-mgmt-prod
data:
  application.yml: |
    spring:
      application:
        name: iam-service
      profiles:
        active: prod
      datasource:
        url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
        username: ${DB_USER}
        password: ${DB_PASSWORD}
        hikari:
          maximum-pool-size: 30
          minimum-idle: 5
      redis:
        host: ${REDIS_HOST}
        port: ${REDIS_PORT}
        password: ${REDIS_PASSWORD}
    
    management:
      endpoints:
        web:
          exposure:
            include: health,info,prometheus,metrics
    
    logging:
      level:
        root: INFO
        com.enterprise.iam: INFO
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: process-service-config
  namespace: product-mgmt-prod
data:
  application.yml: |
    spring:
      application:
        name: process-management-service
      profiles:
        active: prod
      datasource:
        url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
        username: ${DB_USER}
        password: ${DB_PASSWORD}
        hikari:
          maximum-pool-size: 40
          minimum-idle: 10
      rabbitmq:
        host: ${RABBITMQ_HOST}
        port: ${RABBITMQ_PORT}
        username: ${RABBITMQ_USER}
        password: ${RABBITMQ_PASSWORD}
    
    flowable:
      database-schema-update: true
      async-executor-activate: true
      async-executor:
        core-pool-size: 10
        max-pool-size: 50
        queue-size: 500
    
    management:
      endpoints:
        web:
          exposure:
            include: health,info,prometheus,metrics
    
    logging:
      level:
        root: INFO
        com.enterprise.process: INFO
        org.flowable: WARN
